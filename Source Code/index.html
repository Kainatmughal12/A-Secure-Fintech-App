<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Debt Payoff Planner - A secure FinTech app for managing debt payments">
    <title>Debt Payoff Planner</title>
    <!-- Link to external stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Authentication Section (shown when not logged in) -->
    <div id="auth-container" class="auth-container">
        <div class="auth-card">
            <h1>Debt Payoff Planner</h1>
            <p class="subtitle">Secure FinTech Application</p>
            
            <!-- Login Form -->
            <div id="login-section" class="auth-section">
                <h2>Login</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-username">Username:</label>
                        <input type="text" id="login-username" placeholder="Enter your username" required autocomplete="username">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Password:</label>
                        <input type="password" id="login-password" placeholder="Enter your password" required autocomplete="current-password">
                    </div>
                    <div id="login-error" class="error-message" style="display: none;"></div>
                    <button type="submit" class="btn btn-primary">Login</button>
                    <p class="auth-switch">
                        Don't have an account? <a href="#" id="show-register">Register here</a>
                    </p>
                </form>
            </div>
            
            <!-- Registration Form -->
            <div id="register-section" class="auth-section" style="display: none;">
                <h2>Register</h2>
                <form id="register-form">
                    <div class="form-group">
                        <label for="register-username">Username:</label>
                        <input type="text" id="register-username" placeholder="Choose a username" required autocomplete="username">
                        <small class="form-hint">3-20 characters, letters and numbers only</small>
                    </div>
                    <div class="form-group">
                        <label for="register-password">Password:</label>
                        <input type="password" id="register-password" placeholder="Create a strong password" required autocomplete="new-password">
                        <div id="password-strength" class="password-strength">
                            <div class="strength-meter">
                                <div id="strength-bar" class="strength-bar"></div>
                            </div>
                            <div id="strength-text" class="strength-text"></div>
                            <ul id="strength-requirements" class="strength-requirements"></ul>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">Confirm Password:</label>
                        <input type="password" id="confirm-password" placeholder="Re-enter your password" required autocomplete="new-password">
                    </div>
                    <div id="register-error" class="error-message" style="display: none;"></div>
                    <button type="submit" class="btn btn-primary" id="register-btn" disabled>Register</button>
                    <p class="auth-switch">
                        Already have an account? <a href="#" id="show-login">Login here</a>
                    </p>
                </form>
            </div>
        </div>
    </div>

    <!-- Main Application Container (shown when logged in) -->
    <div id="app-container" class="container" style="display: none;">
        <!-- Header section -->
        <header>
            <div class="header-content">
                <div>
                    <h1>Debt Payoff Planner</h1>
                    <p class="subtitle">Manage and track your debt payments securely</p>
                </div>
                <div class="user-info">
                    <span id="username-display"></span>
                    <button id="logout-btn" class="btn btn-danger">Logout</button>
                </div>
            </div>
        </header>

        <!-- Main content area -->
        <main>
            <!-- Section for adding/editing debts -->
            <section id="add-debt-section" class="card">
                <h2 id="form-title">Add New Debt</h2>
                <form id="debt-form">
                    <input type="hidden" id="debt-id" value="">
                    <div class="form-group">
                        <label for="debt-name">Debt Name:</label>
                        <input type="text" id="debt-name" placeholder="e.g., Credit Card, Student Loan" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="debt-amount">Balance ($):</label>
                        <input type="number" id="debt-amount" step="0.01" min="0" placeholder="0.00" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="interest-rate">Interest Rate (%):</label>
                        <input type="number" id="interest-rate" step="0.01" min="0" placeholder="0.00" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="monthly-payment">Monthly Payment ($):</label>
                        <input type="number" id="monthly-payment" step="0.01" min="0" placeholder="0.00" required>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="submit-btn">Add Debt</button>
                        <button type="button" class="btn btn-secondary" id="cancel-btn" style="display: none;">Cancel</button>
                    </div>
                </form>
            </section>

            <!-- Section for displaying debts -->
            <section id="debts-section" class="card">
                <h2>Your Debts</h2>
                <div id="debts-list">
                    <!-- Debts will be dynamically added here -->
                    <p class="empty-state">No debts added yet. Add your first debt above to get started.</p>
                </div>
            </section>

            <!-- Section for payoff summary -->
            <section id="summary-section" class="card">
                <h2>Payoff Summary</h2>
                <div id="summary-content">
                    <!-- Summary will be dynamically calculated and displayed here -->
                    <p class="empty-state">Add debts to see your payoff summary.</p>
                </div>
                <!-- Progress visualization -->
                <div id="progress-visualization" style="display: none;">
                    <h3>Debt Progress Overview</h3>
                    <div id="progress-bars"></div>
                </div>
            </section>

            <!-- File Upload Section -->
            <section id="file-upload-section" class="card">
                <h2>Upload Document</h2>
                <p style="color: var(--text-light); font-size: 0.9rem; margin-bottom: var(--spacing-md);">
                    Upload supporting documents (JPG, PNG, or PDF only)
                </p>
                <form id="file-upload-form">
                    <div class="form-group">
                        <label for="file-input">Select File:</label>
                        <input type="file" id="file-input" name="file" accept=".jpg,.jpeg,.png,.pdf" required>
                        <small class="form-hint">Accepted formats: JPG, PNG, PDF only (Max 10MB)</small>
                        <small class="form-hint" style="color: var(--danger-color); margin-top: 5px; display: block;">
                            ⚠️ Files will be validated: Extension AND MIME type must match allowed types
                        </small>
                    </div>
                    <div id="file-upload-error" class="error-message" style="display: none;"></div>
                    <div id="file-upload-success" class="success-message" style="display: none;"></div>
                    <button type="submit" class="btn btn-primary">Upload File</button>
                </form>
                <div id="uploaded-file-info" style="display: none; margin-top: var(--spacing-md);">
                    <div style="background: rgba(52, 211, 153, 0.1); padding: var(--spacing-md); border-radius: var(--border-radius); border-left: 4px solid var(--secondary-color);">
                        <div style="font-weight: 600; color: var(--secondary-color); margin-bottom: var(--spacing-xs);">File Information</div>
                        <div id="file-info-content" style="color: var(--text-light); font-size: 0.9rem;"></div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer>
            <p>&copy; 2024 Debt Payoff Planner. Secure FinTech Application.</p>
            <p class="audit-log-link">
                <a href="#" id="show-audit-log">View Security Audit Log</a> |
                <a href="#" id="show-security-tests">Security Tests (20 Tests)</a>
            </p>
        </footer>
    </div>

    <!-- Security Tests Modal -->
    <div id="security-tests-modal" class="modal" style="display: none;">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Cybersecurity Test Suite (20 Tests)</h2>
                <button class="modal-close" id="close-security-tests">&times;</button>
            </div>
            <div class="modal-body">
                <div class="test-description">
                    <p><strong>Purpose:</strong> Test the application's security defenses against common cyber threats.</p>
                    <p><strong>Instructions:</strong> Click each test button to simulate an attack. Check console and alerts for secure handling.</p>
                </div>
                <div id="security-tests-content" class="tests-grid"></div>
                <div id="test-results" class="test-results"></div>
            </div>
        </div>
    </div>

    <!-- Audit Log Modal -->
    <div id="audit-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Security Audit Log</h2>
                <button class="modal-close" id="close-audit-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="audit-log-content"></div>
            </div>
        </div>
    </div>

    <!-- Security Module (loaded first) -->
    <script src="security.js"></script>
    <!-- File Validation Module -->
    <script src="fileValidation.js"></script>
    <!-- Security Testing Module -->
    <script src="security-tests.js"></script>
    <!-- Main Application Script -->
    <script src="app.js"></script>
</body>
</html>

